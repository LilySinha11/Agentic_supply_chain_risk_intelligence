<!DOCTYPE html>
<html>
<head>
    <title>Supplier Risk Dashboard</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background-color: #f4f6f9;
        }
        .high-risk {
            background-color: #ffcccc;
        }
        .medium-risk {
            background-color: #fff3cd;
        }
        .low-risk {
            background-color: #d4edda;
        }
    </style>
</head>
<body>

<div class="container mt-4">
    <h2 class="mb-4 text-center">ðŸš¨ Supplier Risk Intelligence Dashboard</h2>

    <table class="table table-bordered table-striped text-center">
        <thead class="table-dark">
            <tr>
                <th>Supplier</th>
                <th>Country</th>
                <th>Risk Score</th>
                <th>Active Risk Events</th>
                <th>Risk Level</th>
            </tr>
        </thead>

        <tbody>
            {% for s in suppliers %}
                {% set score = s.risk_score or 0 %}
                <tr class="
                    {% if score >= 0.7 %}
                        high-risk
                    {% elif score >= 0.4 %}
                        medium-risk
                    {% else %}
                        low-risk
                    {% endif %}
                ">
                    <td>
                        <a href="/agent-ui?supplier={{ s.supplier }}" class="fw-bold">
                            {{ s.supplier }}
                        </a>
                    </td>
                    <td>{{ s.country }}</td>
                    <td>{{ "%.2f"|format(score) }}</td>
                    <td>
                        {% if s.risk_events|length == 0 %}
                            âœ… No active risk
                        {% else %}
                            {% for r in s.risk_events %}
                                <span class="badge bg-danger">{{ r }}</span>
                            {% endfor %}
                        {% endif %}
                    </td>
                    <td>
                        {% if score >= 0.7 %}
                            ðŸ”´ High
                        {% elif score >= 0.4 %}
                            ðŸŸ  Medium
                        {% else %}
                            ðŸŸ¢ Low
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

</body>
</html>
